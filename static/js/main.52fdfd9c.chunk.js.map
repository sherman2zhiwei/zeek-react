{"version":3,"sources":["food.jpeg","config.js","RecommendationList.js","Home.js","Login.js","NotFound.js","RecommendationPage.js","PostRecommendation.js","MyLikes.js","SignUp.js","MyPosts.js","Routes.js","App.js","reportWebVitals.js","index.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","RecommendationList","useState","showLocationToast","setShowLocationToast","limit","setLimit","limitReached","setLimitReached","favourites","setFavourites","firebase","auth","onAuthStateChanged","user","history","push","useHistory","navigator","permissions","query","name","then","result","state","geolocation","getCurrentPosition","position","db","firestore","isSignedIn","providerId","console","log","email","path","orderBy","field","type","d","Toast","bg","show","onClose","Header","className","Body","target","href","isLoading","value","map","recommendation","index","recommendationId","ids","favourited","includes","Card","onClick","pictures","length","Img","variant","src","Title","dishes","join","dish","googleLink","Button","size","restaurant","Text","lines","more","less","description","collection","where","get","querySnapshot","forEach","doc","ref","delete","indexOf","favouritesCopy","JSON","parse","stringify","splice","recommendationRef","exists","noOfFavourites","data","update","add","FieldValue","serverTimestamp","docRef","id","onChange","inView","entry","tempFavourites","Home","location","useLocation","showDeleteToast","setShowDeleteToast","useEffect","deleted","createBrowserHistory","replace","Login","setEmail","password","setPassword","setShow","errorMessage","setErrorMessage","Form","block","googleAuthProvider","GoogleAuthProvider","signInWithPopup","catch","e","message","userCredential","facebookAuthProvider","FacebookAuthProvider","onSubmit","event","preventDefault","signInWithEmailAndPassword","Group","controlId","Label","Control","autoFocus","disabled","Alert","dismissible","Heading","NotFound","RecommendationPage","useParams","setFavourite","loaded","setLoaded","setRecommendationData","images","setImages","setNoOfFavourites","showDelete","setShowDelete","showDeleteModal","setShowDeleteModal","isDeleting","setIsDeleting","username","url","original","Container","showBullets","showPlayButton","items","showThumbnails","Modal","onHide","centered","Footer","PostRecommendation","setDishes","dishName","setDishName","setLocation","validationError","setValidationError","review","setReviewChange","isSubmitting","setIsSubmitting","imageFiles","setImageFiles","handleAddDish","dishesCopy","concat","w","c","toUpperCase","handleDishNameChange","handlePhotosChange","Array","from","files","file","URL","createObjectURL","handleReviewChange","handleSubmit","locationId","place_id","fetch","method","headers","response","json","structured_formatting","main_text","GeoPoint","geometry","lat","lng","currentUser","displayName","image","Compressor","quality","success","storage","child","put","snapshot","getDownloadURL","downloadURL","arrayUnion","error","closeButton","autocompletionRequest","componentRestrictions","country","types","selectProps","noValidate","placeholder","muted","Chip","label","onDelete","as","rows","accept","multiple","MyLikes","recommendations","setRecommendations","FieldPath","documentId","docs","confirmPassword","setConfirmPassword","isPasswordSame","setIsPasswordSame","class","createUserWithEmailAndPassword","MyPosts","Routes","exact","App","Navbar","fixed","collapseOnSelect","expand","to","Brand","Toggle","Collapse","Nav","activeKey","window","pathname","Link","signOut","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.52fdfd9c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/food.ac7422da.jpeg\";","const config = {\r\n  apiKey: \"AIzaSyBd7UGQwV2Z_VQ_sXhmNitUQfpKWOllMe8\",\r\n  authDomain: \"the-weekday-proj-1569491088719.firebaseapp.com\",\r\n  databaseURL: \"https://the-weekday-proj-1569491088719.firebaseio.com\",\r\n  projectId: \"the-weekday-proj-1569491088719\",\r\n  storageBucket: \"the-weekday-proj-1569491088719.appspot.com\",\r\n  messagingSenderId: \"889676615489\",\r\n  appId: \"1:889676615489:web:24aedd466655ab93e19bc0\",\r\n  measurementId: \"G-FMCYLKSPSF\"\r\n};\r\n\r\nexport default config","import config from \"./config.js\"\r\nimport { FirestoreCollection } from \"@react-firebase/firestore\";\r\nimport { useState } from \"react\";\r\nimport Toast from \"react-bootstrap/Toast\";\r\nimport './RecommendationList.css';\r\nimport { InView } from 'react-intersection-observer';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { FaRegHeart, FaHeart } from 'react-icons/fa';\r\nimport firebase from \"firebase/app\";\r\nimport {\r\n  IfFirebaseAuthed,\r\n  IfFirebaseUnAuthed,\r\n} from \"@react-firebase/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MdLocationOn, MdAdd } from 'react-icons/md'\r\nimport Button from 'react-bootstrap/Button';\r\nimport ShowMoreText from \"react-show-more-text\";\r\nimport { Fab } from '@material-ui/core';\r\n\r\n\r\nexport default function RecommendationList(){\r\n\tconst [showLocationToast, setShowLocationToast] = useState(false);\r\n\tconst [limit, setLimit] = useState(10);\r\n\tconst [limitReached, setLimitReached] = useState(false);\r\n\tconst [favourites, setFavourites] = useState(null);\r\n\r\n\tfirebase.auth().onAuthStateChanged((user) => {\r\n\t  if (!user){\r\n\t  \thistory.push('/login')\r\n\t  }\r\n\t});\r\n\r\n\tconst history = useHistory();\r\n\r\n\tlet location;\r\n\r\n\tnavigator.permissions\r\n\t\t.query({ name: \"geolocation\" })\r\n\t\t.then(function(result){\r\n\t\t\tif (result.state === \"granted\"){\r\n\t\t\t\tnavigator.geolocation.getCurrentPosition(function(position){\r\n\t\t\t\t\t\tlocation = position;\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t} else if (result.state === \"denied\"){\r\n\t\t\t\tsetShowLocationToast(true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\tvar db = firebase.firestore();\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t<IfFirebaseAuthed>\r\n\t\t\t{({ isSignedIn, user, providerId }) => {\r\n\t\t\t\tif(isSignedIn){\r\n\t\t\t\t\tconsole.log(\"signed in\")\r\n\t\t\t\t\tvar email = user.email;\r\n\r\n\t\t\t\t\tif (favourites == null){\r\n\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").where('userEmail', \"==\", email).get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\tlet tempFavourites = []\r\n\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\ttempFavourites.push(doc.data().recommendationId)\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\tsetFavourites(tempFavourites)\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<FirestoreCollection path=\"/recommendations/\" limit={1} orderBy={[{field: \"timestamps\", type: \"desc\"}]}>\r\n\t\t\t\t\t\t\t{d => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"loaded\")\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<Toast bg=\"warning\" show={showLocationToast} onClose={()=>setShowLocationToast(false)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Toast.Header>\r\n\t\t\t\t\t\t\t\t\t\t\t  <strong className=\"me-auto\">No Location Access</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Toast.Header>\r\n\t\t\t\t\t\t\t\t\t\t\t<Toast.Body>Zeek does not have access to your location right now. We wouldn't want to recommend restaurants you can't reach. Find out how to enable location access for your browser <a target=\"_blank\" href=\"https://docs.buddypunch.com/en/articles/919258-how-to-enable-location-services-for-chrome-safari-edge-and-android-ios-devices-gps-setting\">here</a>.</Toast.Body>\r\n\t\t\t\t\t\t\t\t\t\t</Toast>\r\n\t\t\t\t\t\t\t\t\t\t{d.isLoading || !d.value ? null : \r\n\t\t\t\t\t\t\t\t\t\t\td.value.map((recommendation,index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationId = d.ids[index]\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar favourited = favourites.includes(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<Card onClick={()=>{history.push('/recommendation/' + recommendationId)}} className=\"rounded-0\">*/}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card onClick=\"\" className=\"rounded-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.pictures.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card.Img className=\"rounded-0\" variant=\"top\" src={recommendation.pictures[0]}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t<a href=\"\" onClick={()=>history.push('/recommendation/' + recommendationId)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t  <Card.Title className=\"article-title\">{recommendation.dishes ? recommendation.dishes.join(\", \") : recommendation.dish}</Card.Title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t</a> \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <a href={recommendation.googleLink} target=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <Button type=\"button\" variant=\"danger\" className=\"d-flex align-items-center px-2 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<MdLocationOn size={20}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<span className=\"restaurant\">{recommendation.restaurant}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <Card.Text className=\"description\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <ShowMoreText className=\"show-more\" lines={3} more=\"Show more\" less=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t{recommendation.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </ShowMoreText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <hr className=\"mt-2 mb-3\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <Card.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t{recommendation.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<span className=\"likes d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t{recommendation.favourites}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t<FaHeart className=\"number-of-likes\" size={14}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{favourited ? \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={()=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('userEmail', \"==\", email)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('recommendationId', \"==\", recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoc.ref.delete();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = favourites.indexOf(recommendationId);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet favouritesCopy = JSON.parse(JSON.stringify(favourites));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  favouritesCopy.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFavourites(favouritesCopy)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet noOfFavourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: noOfFavourites - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaHeart className=\"like-icon liked\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"liked\">Liked</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").add({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'recommendationId': recommendationId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'userEmail': email,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'timestamps': firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}).then((docRef) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet favouritesCopy = JSON.parse(JSON.stringify(favourites));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavouritesCopy.push(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    console.log(\"Document written with ID: \", docRef.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    setFavourites(favouritesCopy)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists && doc.data().favourites){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: favourites + 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaRegHeart className=\"like-icon\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLike\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t<InView onChange={(inView, entry) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(inView && !d.isLoading && !limitReached){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetLimit(limit+5);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(limit);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(!d.isLoading && d.value.length < limit){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetLimitReached(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t  <h3>{limitReached ? \"You've reached the bottom! How about adding your own post?\" : \"Loading more posts...\"}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</InView>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t</FirestoreCollection>\r\n\t\t\t\t\t)}\r\n\t\t\t\t}\t\t\t  \r\n\t\t\t}}\r\n\r\n\t\t</IfFirebaseAuthed>\r\n\t\t</>\r\n\r\n\t)\r\n}","import React from \"react\";\r\nimport \"./Home.css\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport food from \"./food.jpeg\";\r\nimport { FaRegHeart, FaHeart } from 'react-icons/fa';\r\nimport RecommendationList from './RecommendationList';\r\nimport { useState } from \"react\";\r\nimport Toast from \"react-bootstrap/Toast\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { createBrowserHistory } from \"history\";\r\n\r\n\r\nexport default function Home() {\r\n\tconst location = useLocation();\r\n\tconst [showDeleteToast, setShowDeleteToast] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(location)\r\n\t\tif (location.state){\r\n\t\t\tsetShowDeleteToast(location.state.state.deleted)\r\n\t\t\tlocation.state.state.deleted = false\r\n\t\t\tconst history = createBrowserHistory();\r\n\r\n\t\t\tconst state = {...location.state}\r\n\t\t\tdelete state.state\r\n\t\t\thistory.replace({...history.location, state})\r\n\t\t}\r\n\t}, [location])\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"Home\">\r\n\t\t  <div className=\"lander\">\r\n\t\t    <h1>Recommendations</h1>\r\n\t\t    {/*<p className=\"text-muted\">A food recommendation app</p>*/}\r\n\t\t  </div>\r\n\t\t  <RecommendationList/>\r\n\t\t  {\r\n\t\t  \tshowDeleteToast ? \r\n\t\t  \t\t<Toast bg='success' show={showDeleteToast} onClose={() => setShowDeleteToast(false)}>\r\n\t\t  \t\t  <Toast.Header>\r\n\t\t  \t\t    <strong className=\"me-auto\">Post Deleted</strong>\r\n\t\t  \t\t  </Toast.Header>\r\n\t\t  \t\t  <Toast.Body className=\"post-deleted\">Your post has been deleted!</Toast.Body>\r\n\t\t  \t\t</Toast>\r\n\t\t  \t: null\r\n\t\t  }\r\n\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport \"./Login.css\";\r\nimport \"firebase/auth\";\r\nimport firebase from \"firebase/app\";\r\nimport {\r\n  FirebaseAuthConsumer\r\n} from \"@react-firebase/auth\";\r\nimport { FaGoogle, FaFacebook } from 'react-icons/fa';\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [show, setShow] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  function validateForm() {\r\n    return email.length > 0 && password.length > 0;\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    firebase.auth().signInWithEmailAndPassword(email, password)\r\n      .then((userCredential) => {\r\n        console.log(\"watrafak\")\r\n        history.push(\"/\");\r\n      })\r\n      .catch((e) => {\r\n        setErrorMessage(e.message)\r\n        setShow(true) \r\n      });\r\n  }\r\n\r\n  return (\r\n    <div className=\"Login\">\r\n      <h1>Sign In</h1>\r\n      <Form className=\"d-grid gap-2 my-4\">\r\n        <Button block variant=\"danger\" className=\"social-button py-2\" onClick={() => {\r\n              const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n              firebase.auth().signInWithPopup(googleAuthProvider)\r\n              .catch((e) => {\r\n                  setErrorMessage(e.message)\r\n                  setShow(true)\r\n              }).then((userCredential) => {\r\n                history.push(\"/\");\r\n              });\r\n            }}>\r\n          <FaGoogle className=\"social-button-icon\"/>\r\n          Sign In With Google\r\n        </Button>\r\n        <Button block variant=\"primary\" className=\"social-button py-2\" onClick={() => {\r\n              const facebookAuthProvider = new firebase.auth.FacebookAuthProvider();\r\n              firebase.auth().signInWithPopup(facebookAuthProvider)\r\n              .catch((e) => {\r\n                  setErrorMessage(e.message)\r\n                  setShow(true)\r\n              }).then((userCredential) => {\r\n                history.push(\"/\");\r\n              });\r\n            }}>\r\n          <FaFacebook className=\"social-button-icon\"/>\r\n          Sign In With Facebook\r\n        </Button>\r\n      </Form>\r\n\r\n      <div className=\"or-separator\">\r\n        <i>or</i>\r\n      </div>\r\n\r\n      <Form className=\"d-grid gap-1\" onSubmit={handleSubmit}>\r\n        <Form.Group size=\"lg\" controlId=\"email\">\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control\r\n            autoFocus\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group size=\"lg\" controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Button block size=\"lg mt-3\" type=\"submit\" disabled={!validateForm()}>\r\n          Sign In\r\n        </Button>\r\n      </Form>\r\n\r\n      {show ? \r\n        (\r\n          <Alert className=\"fixed-bottom\" variant=\"danger\" onClose={() => setShow(false)} dismissible>\r\n            <Alert.Heading>Oh snap! You got an error!</Alert.Heading>\r\n            <p>\r\n              {errorMessage}\r\n            </p>\r\n          </Alert>\r\n        ) :\r\n        null\r\n      }\r\n      \r\n\r\n{/*      <FirebaseAuthConsumer>\r\n        {({ isSignedIn, user, providerId }) => {\r\n          return (\r\n            <div>\r\n              <pre style={{ height: 300, overflow: \"auto\" }}>\r\n                {JSON.stringify({ isSignedIn, user, providerId }, null, 2)}\r\n              </pre>\r\n              {isSignedIn ? <Button block size=\"lg\" onClick={() => {\r\n                    firebase.auth().signOut();\r\n                  }}>\r\n                Sign Out\r\n              </Button> : null}\r\n            </div>\r\n          );\r\n        }}\r\n      </FirebaseAuthConsumer>*/}\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport \"./NotFound.css\";\r\n\r\nexport default function NotFound(){\r\n\treturn (\r\n\t\t<div className=\"NotFound text-center\">\r\n\t\t\t<h3>Sorry, page not found!</h3>\r\n\t\t</div>\r\n\t)\r\n}","import { useParams } from \"react-router-dom\";\r\nimport {\r\n  FirebaseAuthConsumer\r\n} from \"@react-firebase/auth\";\r\nimport { FirestoreDocument, FirestoreCollection } from \"@react-firebase/firestore\";\r\nimport './RecommendationPage.css'\r\nimport Container from \"react-bootstrap/Container\";\r\nimport { useState } from \"react\";\r\nimport firebase from \"firebase/app\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { FaRegHeart, FaHeart } from 'react-icons/fa';\r\nimport ImageGallery from \"react-image-gallery\";\r\nimport \"react-image-gallery/styles/css/image-gallery.css\";\r\nimport { MdDelete, MdLocationOn } from 'react-icons/md'\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function RecommendationPage(){\r\n\tlet { id } = useParams();\r\n\tconst [favourited, setFavourite] = useState(null)\r\n\tconst [loaded, setLoaded] = useState(false)\r\n\tconst [recommendation, setRecommendationData] = useState({})\r\n\tconst [images, setImages] = useState([])\r\n\tconst [noOfFavourites, setNoOfFavourites] = useState(0)\r\n\tconst [showDelete, setShowDelete] = useState(false)\r\n\tconst [showDeleteModal, setShowDeleteModal] = useState(false)\r\n\tconst [isDeleting, setIsDeleting] = useState(false)\r\n\tconst history = useHistory();\r\n\r\n\tvar db = firebase.firestore();\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<FirebaseAuthConsumer>\r\n\t\t\t{({ isSignedIn, user, providerId }) => {\r\n\t\t\t\tif(isSignedIn){\r\n\r\n\t\t\t\t\tvar email = user.email;\r\n\t\t\t\t\tif (favourited == null){\r\n\t\t\t\t\t\tconsole.log(\"set favourite\")\r\n\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").where('userEmail', \"==\", email).get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\tlet tempFavourites = []\r\n\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\ttempFavourites.push(doc.data().recommendationId)\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\tif (tempFavourites.includes(id)){\r\n\t\t\t\t\t\t\t\t\tsetFavourite(true)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif(!loaded){\r\n\t\t\t\t\t\tvar path = \"/recommendations/\" + id\r\n\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(id)\r\n\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\tif (doc.exists){\t\r\n\t\t\t\t\t\t\tif(doc.data().username === email){\r\n\t\t\t\t\t\t\t\t\tsetShowDelete(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsetRecommendationData(doc.data())\r\n\t\t\t\t\t\t\t\tsetLoaded(true)\r\n\t\t\t\t\t\t\t\tif(doc.data().favourites){\r\n\t\t\t\t\t\t\t\t\tsetNoOfFavourites(doc.data().favourites)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(doc.data().pictures){\r\n\t\t\t\t\t\t\t\t\tsetImages(doc.data().pictures.map((url) => {\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\toriginal: url,\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}))\r\n\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\treturn ( loaded ? (\r\n\t\t\t\t\t\t\t\t<Container className=\"recommendation my-auto\">\r\n\t\t\t\t\t\t\t\t\t\t<Card className=\"rounded-0 details\">\r\n\t\t\t\t\t\t\t\t\t\t\t{images.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t\t\t<ImageGallery showBullets={true} showPlayButton={false} items={images} showThumbnails={false}/>\r\n\t\t\t\t\t\t\t\t\t\t\t: null\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t  <Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t    <Card.Title>\r\n\t\t\t\t\t\t\t\t\t\t    \t{recommendation.dishes ? recommendation.dishes.join(\", \") : recommendation.dish}\r\n\t\t\t\t\t\t\t\t\t\t    \t{showDelete ?\r\n\t\t\t\t\t\t\t\t\t\t    \t\t<span className=\"delete d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t<MdDelete onClick={()=>{\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t\tsetShowDeleteModal(true)\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t}} className=\"delete-icon\" size={25}/>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t{ showDeleteModal ? \r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t<Modal onHide={() => setShowDeleteModal(false)} show={showDeleteModal} centered>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t  <Modal.Header>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    <Modal.Title>Are you sure?</Modal.Title>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t  </Modal.Header>\r\n\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t  <Modal.Body>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    <p>Do you really want to delete this post? This process cannot be undone.</p>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t  </Modal.Body>\r\n\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t  <Modal.Footer>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    <Button variant=\"secondary\" onClick={()=>{setShowDeleteModal(false)}}>Cancel</Button>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    <Button variant=\"danger\" onClick={()=>{\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \tconsole.log(\"asd\")\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \tsetIsDeleting(true)\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \tif(recommendation){\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\tif(recommendation.username === email){\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t\tdb.collection('recommendations').doc(id).delete().then(() => {\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t\t\thistory.push('/', {\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t\t\t\tstate: {\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t\t\t\t\tdeleted: true\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t\t}\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    \t}\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t    }}>Delete</Button>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t  </Modal.Footer>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t\t</Modal> : null}\r\n\t\t\t\t\t\t\t\t\t\t    \t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t    \t\t: null\r\n\t\t\t\t\t\t\t\t\t\t    \t}\r\n\t\t\t\t\t\t\t\t\t\t    \t{ isDeleting ? <div className=\"loader-container\">\r\n\t\t\t\t\t\t\t\t\t\t    \t\t<div className=\"loader\">\r\n\t\t\t\t\t\t\t\t\t\t    \t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t    \t</div> : null }\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Card.Title>\r\n\t\t\t\t\t\t\t\t\t\t    <a href={recommendation.googleLink} target=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t\t\t    <Button type=\"button\" variant=\"danger\" className=\"px-2 mb-2 align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t    \t<MdLocationOn size={20}/>\r\n\t\t\t\t\t\t\t\t\t\t\t    \t{recommendation.restaurant}\r\n\t\t\t\t\t\t\t\t\t\t\t    </Button>\r\n\t\t\t\t\t\t\t\t\t\t\t  </a>\r\n\t\t\t\t\t\t\t\t\t\t    {/*<Card.Subtitle className=\"\">{recommendation.restaurant}</Card.Subtitle>*/}\r\n\t\t\t\t\t\t\t\t\t\t    <Card.Text>\r\n\t\t\t\t\t\t\t\t\t\t      {recommendation.description} \r\n\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\t\t\t\t\t\t\t\t\t\t    <hr className=\"mt-2 mb-3\"/>\r\n\t\t\t\t\t\t\t\t\t\t    <Card.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t    \t{recommendation.name}\r\n\t\t\t\t\t\t\t\t\t\t    \t<span className=\"likes d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t    \t    {noOfFavourites} \r\n\t\t\t\t\t\t\t\t\t\t    \t    <FaHeart className=\"number-of-likes\" size={14}/>\r\n\t\t\t\t\t\t\t\t\t\t    \t</span>\r\n\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\t\t\t\t\t\t\t\t\t\t  </Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t\t\t{favourited ? \r\n\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={()=>{\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('userEmail', \"==\", email)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('recommendationId', \"==\", id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoc.ref.delete();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet noOfFavourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: noOfFavourites - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetNoOfFavourites(noOfFavourites - 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFavourite(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FaHeart className=\"like-icon liked\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"liked\">Liked</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").add({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'recommendationId': id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'userEmail': email,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'timestamps': firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}).then((docRef) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t    console.log(\"Document written with ID: \", docRef.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists && doc.data().favourites){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet favourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: favourites + 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFavourite(true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetNoOfFavourites(noOfFavourites + 1)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FaRegHeart className=\"like-icon\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tLike\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t\t) : null )\r\n\t\t\t\t} else {\r\n\t\t\t\t\thistory.push('/login')\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t</FirebaseAuthConsumer>\r\n\r\n\t)\r\n\r\n}","import Form from 'react-bootstrap/Form'\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport \"./PostRecommendation.css\"\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { useState } from \"react\";\r\nimport ImageGallery from \"react-image-gallery\";\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport config from \"./config.js\"\r\nimport GooglePlacesAutocomplete from 'react-google-places-autocomplete';\r\nimport { MdLocationOn } from 'react-icons/md'\r\nimport Toast from \"react-bootstrap/Toast\";\r\nimport firebase from \"firebase/app\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Compressor from 'compressorjs';\r\nimport \"firebase/storage\";\r\nimport {\r\n  IfFirebaseAuthed,\r\n} from \"@react-firebase/auth\";\r\n\r\nexport default function PostRecommendation(){\r\n\tconst [dishes, setDishes] = useState([]);\r\n\tconst [dishName, setDishName] = useState(\"\");\r\n\tconst [images, setImages] = useState([]);\r\n\tconst [show, setShow] = useState(false);\r\n\tconst [location, setLocation] = useState(null);\r\n\tconst [validationError, setValidationError] = useState(null);\r\n\tconst [review, setReviewChange] = useState(\"\");\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst history = useHistory();\r\n\tconst [imageFiles, setImageFiles] = useState([]);\r\n\r\n\tfirebase.auth().onAuthStateChanged((user) => {\r\n\t  if (!user){\r\n\t  \thistory.push('/login')\r\n\t  }\r\n\t});\r\n\r\n\tfunction handleAddDish(e){\r\n\t\tlet dishesCopy = JSON.parse(JSON.stringify(dishes)).concat(dishName.replace(/\\w\\S*/g, (w) => (w.replace(/^\\w/, (c) => c.toUpperCase()))));\r\n\t\tsetDishes(dishesCopy)\r\n\t}\r\n\r\n\tfunction handleDishNameChange(e){\r\n\t\tsetDishName(e.target.value)\r\n\t}\r\n\r\n\tfunction handlePhotosChange(e){\r\n\t\tsetImages(\r\n\t\t\tArray.from(e.target.files).map(file => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\toriginal: URL.createObjectURL(file)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t)\r\n\t\tconsole.log(e.target.files)\r\n\t\tsetImageFiles(Array.from(e.target.files))\r\n\t}\r\n\r\n\tfunction handleReviewChange(e){\r\n\t\tsetReviewChange(e.target.value)\r\n\t}\r\n\r\n\tfunction handleSubmit(e){\r\n\t\tsetIsSubmitting(true)\r\n\t\tif(!location){\r\n\t\t\tsetValidationError(\"One restaurant must be chosen for your recommendation.\")\r\n\t\t\tsetIsSubmitting(false)\r\n\t\t\treturn\r\n\r\n\t\t}\r\n\r\n\t\tif(dishes.length < 1){\r\n\t\t\tsetValidationError(\"At least one dish must be added to the recommendation\")\r\n\t\t\tsetIsSubmitting(false)\r\n\t\t\treturn\r\n\r\n\t\t}\r\n\r\n\t\tif(review.length < 1){\r\n\t\t\tsetValidationError(\"Review section cannot be empty\")\r\n\t\t\tsetIsSubmitting(false)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetValidationError(null)\r\n\r\n\t\tlet locationId = location.value.place_id\r\n\t\tconst proxyurl = \"https://secret-ocean-49799.herokuapp.com/\";\r\n\t\tconst url = \"https://maps.googleapis.com/maps/api/place/details/json?place_id=\" + locationId + \"&key=\" + config.apiKey \r\n\t\t// console.log(location.value.place_id)\r\n\t\t// console.log(url)\r\n\t\tfetch(proxyurl + url, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t  \"Content-Type\": \"application/json\"\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tconst recommendation = {\r\n\t\t\t        'description': review,\r\n\t\t\t        'dishes': dishes,\r\n\t\t\t        'restaurant': location.value.structured_formatting.main_text,\r\n\t\t\t        'location': new firebase.firestore.GeoPoint(\r\n\t\t\t          data.result.geometry.location.lat,\r\n\t\t\t          data.result.geometry.location.lng,\r\n\t\t\t        ),\r\n\t\t\t        'googleLink': data.result.url,\r\n\t\t\t        'timestamps': firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t        'name': firebase.auth().currentUser.displayName,\r\n\t\t\t        'username': firebase.auth().currentUser.email,\r\n\t\t\t        'favourites': 0,\r\n\t\t\t        'active': true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar db = firebase.firestore();\r\n\t\t\t\tvar docRef = db.collection(\"recommendations\").add(recommendation)\r\n\t\t\t\t\t.then((docRef) => {\r\n\t\t\t\t\t\timageFiles.forEach((image, index) => {\r\n\t\t\t\t\t\t\tnew Compressor(image, {\r\n\t\t\t\t\t\t\t\tquality: 0.8,\r\n\t\t\t\t\t\t\t\tsuccess(result){\r\n\t\t\t\t\t\t\t\t\tvar recommendationImagesRef = firebase.storage().ref().child('recommendations/' + docRef.id + '/picture' + index)\r\n\t\t\t\t\t\t\t\t\trecommendationImagesRef.put(result).then((snapshot) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"Uploaded a file\")\r\n\t\t\t\t\t\t\t\t\t\tsnapshot.ref.getDownloadURL().then((downloadURL) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(downloadURL)\r\n\t\t\t\t\t\t\t\t\t\t\tdb.collection('recommendations').doc(docRef.id).update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t'pictures': firebase.firestore.FieldValue.arrayUnion(downloadURL)\r\n\t\t\t\t\t\t\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(index === imageFiles.length - 1){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetIsSubmitting(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push('/recommendation/' + docRef.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tif (imageFiles.length === 0){\r\n\t\t\t\t\t\t\tsetIsSubmitting(false)\r\n\t\t\t\t\t\t\thistory.push('/recommendation/' + docRef.id)\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t})\r\n\r\n\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.log(error))\r\n\t}\r\n\r\n\t// console.log(location)\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<IfFirebaseAuthed>\r\n\t\t\t\t{({ isSignedIn, user, providerId }) => {\r\n\t\t\t\t\tif(isSignedIn){\r\n\t\t\t\t\t\treturn (<Card>\r\n\t\t\t\t\t\t\t{ isSubmitting ? <div className=\"loader-container\">\r\n\t\t\t\t\t\t\t\t<div className=\"loader\">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div> : null }\r\n\t\t\t\t\t\t\t<Toast bg=\"danger\" show={validationError} onClose={()=>setValidationError(null)}>\r\n\t\t\t\t\t\t\t\t<Toast.Header>\r\n\t\t\t\t\t\t\t\t  <strong className=\"me-auto\">Error When Submitting</strong>\r\n\t\t\t\t\t\t\t\t</Toast.Header>\r\n\t\t\t\t\t\t\t\t<Toast.Body className=\"form-error\">{validationError}</Toast.Body>\r\n\t\t\t\t\t\t\t</Toast>\r\n\r\n\t\t\t\t\t\t\t<Modal show={show} onHide={() => setShow(false)} centered>\r\n\t\t\t\t\t\t\t  <Modal.Header closeButton>\r\n\t\t\t\t\t\t\t    <Modal.Title>Location Search</Modal.Title>\r\n\t\t\t\t\t\t\t  </Modal.Header>\r\n\t\t\t\t\t\t\t  <Modal.Body>\r\n\t\t\t\t\t\t\t  \t<GooglePlacesAutocomplete \r\n\t\t\t\t\t\t\t  \tautocompletionRequest={{\r\n\t\t\t\t\t\t\t  \t\tcomponentRestrictions: { country: \"my\"},\r\n\t\t\t\t\t\t\t  \t\ttypes: [\"establishment\"]\r\n\t\t\t\t\t\t\t  \t}}\r\n\t\t\t\t\t\t\t  \tselectProps={{\r\n\t\t\t\t\t\t\t  \t\tlocation,\r\n\t\t\t\t\t\t\t  \t\tonChange: setLocation,\r\n\t\t\t\t\t\t\t  \t}} apiKey={config.apiKey}/>\r\n\t\t\t\t\t\t\t  </Modal.Body>\r\n\t\t\t\t\t\t\t  <Modal.Footer>\r\n\t\t\t\t\t\t\t    <Button variant=\"primary\" onClick={() => setShow(false)}>\r\n\t\t\t\t\t\t\t      Save Changes\r\n\t\t\t\t\t\t\t    </Button>\r\n\t\t\t\t\t\t\t  </Modal.Footer>\r\n\t\t\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t\t\t<Form noValidate className=\"post-recommendation-form\">\r\n\t\t\t\t\t\t\t  <h2 className=\"post-your-recommendation mb-4\">Post Your Recommendation</h2>\r\n\t\t\t\t\t\t\t  <Form.Label className=\"restaurant\">Restaurant : </Form.Label>\r\n\t\t\t\t\t\t\t  {location ? \r\n\t\t\t\t\t\t\t      <a href=\"\" target=\"_blank\">\r\n\t\t\t\t\t\t\t  \t    <Button type=\"button\" variant=\"danger\" className=\"px-2 mb-2 align-items-center\">\r\n\t\t\t\t\t\t\t  \t    \t<MdLocationOn size={20}/>\r\n\t\t\t\t\t\t\t  \t    \t{location.value.structured_formatting.main_text}\r\n\t\t\t\t\t\t\t  \t    </Button>\r\n\t\t\t\t\t\t\t  \t  </a> : null\r\n\t\t\t\t\t\t  \t  }\r\n\t\t\t\t\t\t\t  <div></div>\r\n\t\t\t\t\t\t\t  <Button className=\"mb-4\" variant=\"primary\" onClick={()=>setShow(true)}>\r\n\t\t\t\t\t\t\t    Pick A Restaurant\r\n\t\t\t\t\t\t\t  </Button>\r\n\t\t\t\t\t\t\t  <Form.Group className=\"mb-3\">\r\n\t\t\t\t\t\t\t    <Form.Label>Dish Name</Form.Label>\r\n\t\t\t\t\t\t\t    <Form.Control onChange={handleDishNameChange} placeholder=\"Enter dish name here\" />\r\n\t\t\t\t\t\t\t    <Form.Text muted>\r\n\t\t\t\t\t\t\t    \tEnter one dish at a time and press the \"Add Dish\" button. Repeat the process to add multiple dishes.\r\n\t\t\t\t\t\t\t    </Form.Text>\r\n\r\n\t\t\t\t\t\t\t  </Form.Group>\r\n\t\t\t\t\t\t\t  {dishes.map((dish, index)=>\r\n\t\t\t\t\t\t\t  \t<Chip label={dish} onDelete={(e)=>{\r\n\t\t\t\t\t\t\t  \t\tlet dishesCopy = JSON.parse(JSON.stringify(dishes));\r\n\t\t\t\t\t\t\t  \t\tdishesCopy.splice(index, 1)\r\n\t\t\t\t\t\t\t  \t\tsetDishes(dishesCopy)\r\n\t\t\t\t\t\t\t  \t}}/>\r\n\t\t\t\t\t\t\t  )}\r\n\t\t\t\t\t\t\t  <p></p>\r\n\t\t\t\t\t\t\t  <Button variant=\"primary\" onClick={handleAddDish}>\r\n\t\t\t\t\t\t\t    Add Dish\r\n\t\t\t\t\t\t\t  </Button>\r\n\t\t\t\t\t\t\t  <Form.Group className=\"mt-4 mb-3\">\r\n\t\t\t\t\t\t\t    <Form.Label>Review</Form.Label>\r\n\t\t\t\t\t\t\t    <Form.Control as=\"textarea\" rows={3} placeholder=\"Tell us what you liked about the place!\" onChange={handleReviewChange}/>\r\n\t\t\t\t\t\t\t  </Form.Group>\r\n\r\n\r\n\t\t\t\t\t\t\t  <Form.Group controlId=\"formFileMultiple\" className=\"mb-3\">\r\n\t\t\t\t\t\t\t    <Form.Label>Photos</Form.Label>\r\n\t\t\t\t\t\t\t    <Form.Control accept=\"image/*\" type=\"file\" multiple onChange={handlePhotosChange}/>\r\n\t\t\t\t\t\t\t  </Form.Group>\r\n\t\t\t\t\t\t\t  {images.length > 0 ? <ImageGallery showBullets={true} showPlayButton={false} items={images} showThumbnails={false}/> : null}\r\n\r\n\r\n\t\t\t\t\t\t\t  <Button className=\"mt-2\" variant=\"primary\" onClick={handleSubmit}>\r\n\t\t\t\t\t\t\t    Submit\r\n\t\t\t\t\t\t\t  </Button>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t</IfFirebaseAuthed>\r\n\r\n\t\t</>\r\n\r\n\t)\r\n}","import config from \"./config.js\"\r\nimport { FirestoreCollection } from \"@react-firebase/firestore\";\r\nimport { useState } from \"react\";\r\nimport Toast from \"react-bootstrap/Toast\";\r\nimport './RecommendationList.css';\r\nimport { InView } from 'react-intersection-observer';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { FaRegHeart, FaHeart } from 'react-icons/fa';\r\nimport firebase from \"firebase/app\";\r\nimport {\r\n  IfFirebaseAuthed,\r\n  IfFirebaseUnAuthed,\r\n} from \"@react-firebase/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MdLocationOn, MdAdd } from 'react-icons/md'\r\nimport Button from 'react-bootstrap/Button';\r\nimport ShowMoreText from \"react-show-more-text\";\r\nimport { Fab } from '@material-ui/core';\r\nimport './MyLikes.css'\r\n\r\nexport default function MyLikes(){\r\n\tconst [showLocationToast, setShowLocationToast] = useState(false);\r\n\tconst [limit, setLimit] = useState(10);\r\n\tconst [limitReached, setLimitReached] = useState(false);\r\n\tconst [favourites, setFavourites] = useState(null);\r\n\tconst [recommendations, setRecommendations] = useState([]);\r\n\r\n\tfirebase.auth().onAuthStateChanged((user) => {\r\n\t  if (!user){\r\n\t  \thistory.push('/login')\r\n\t  }\r\n\t});\r\n\r\n\tconst history = useHistory();\r\n\r\n\t// let location;\r\n\r\n\t// navigator.permissions\r\n\t// \t.query({ name: \"geolocation\" })\r\n\t// \t.then(function(result){\r\n\t// \t\tif (result.state === \"granted\"){\r\n\t// \t\t\tnavigator.geolocation.getCurrentPosition(function(position){\r\n\t// \t\t\t\t\tlocation = position;\r\n\t// \t\t\t\t}\r\n\t// \t\t\t)\r\n\t// \t\t} else if (result.state === \"denied\"){\r\n\t// \t\t\tsetShowLocationToast(true);\r\n\t// \t\t}\r\n\t// \t});\r\n\r\n\r\n\tvar db = firebase.firestore();\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<IfFirebaseAuthed>\r\n\t\t\t\t{({ isSignedIn, user, providerId }) => {\r\n\t\t\t\t\tif(isSignedIn){\r\n\t\t\t\t\t\tconsole.log(\"signed in\")\r\n\r\n\t\t\t\t\t\tvar email = user.email;\r\n\r\n\r\n\t\t\t\t\t\tif (favourites == null){\r\n\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").where('userEmail', \"==\", email).get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\t\tlet tempFavourites = []\r\n\t\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\t\ttempFavourites.push(doc.data().recommendationId)\r\n\t\t\t\t\t\t\t\t\t})\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\tlet favouritesRef = db.collection(\"recommendations\").where(firebase.firestore.FieldPath.documentId(),'in',tempFavourites)\r\n\r\n\t\t\t\t\t\t\t\t\tfavouritesRef.get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\t\t\tsetRecommendations(querySnapshot)\r\n\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\tsetFavourites(tempFavourites)\r\n\r\n\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (recommendations.docs){\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h1>My Likes</h1>\r\n\t\t\t\t\t\t\t\t\t\t{ recommendations.docs.map((snapshot, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet recommendation = snapshot.data()\r\n\t\t\t\t\t\t\t\t\t\t\tlet recommendationId = snapshot.id\r\n\t\t\t\t\t\t\t\t\t\t\tvar favourited = favourites.includes(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<Card onClick={()=>{history.push('/recommendation/' + recommendationId)}} className=\"rounded-0\">*/}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card onClick=\"\" className=\"rounded-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.pictures.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card.Img className=\"rounded-0\" variant=\"top\" src={recommendation.pictures[0]}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t<a href=\"\" onClick={()=>history.push('/recommendation/' + recommendationId)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t  <Card.Title className=\"article-title\">{recommendation.dishes ? recommendation.dishes.join(\", \") : recommendation.dish}</Card.Title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t</a> \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <a href={recommendation.googleLink} target=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <Button type=\"button\" variant=\"danger\" className=\"d-flex align-items-center px-2 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<MdLocationOn size={20}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<span className=\"restaurant\">{recommendation.restaurant}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <Card.Text className=\"description\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <ShowMoreText className=\"show-more\" lines={3} more=\"Show more\" less=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t{recommendation.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </ShowMoreText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <hr className=\"mt-2 mb-3\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <Card.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t{recommendation.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<span className=\"likes d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t{recommendation.favourites}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t<FaHeart className=\"number-of-likes\" size={14}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{favourited ? \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={()=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('userEmail', \"==\", email)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('recommendationId', \"==\", recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoc.ref.delete();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = favourites.indexOf(recommendationId);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet favouritesCopy = JSON.parse(JSON.stringify(favourites));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  favouritesCopy.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFavourites(favouritesCopy)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet noOfFavourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: noOfFavourites - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaHeart className=\"like-icon liked\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"liked\">Liked</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").add({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'recommendationId': recommendationId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'userEmail': email,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'timestamps': firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}).then((docRef) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet favouritesCopy = JSON.parse(JSON.stringify(favourites));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavouritesCopy.push(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    console.log(\"Document written with ID: \", docRef.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    setFavourites(favouritesCopy)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists && doc.data().favourites){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: favourites + 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaRegHeart className=\"like-icon\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLike\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\t  \r\n\t\t\t\t}}\r\n\r\n\t\t\t</IfFirebaseAuthed>\r\n\t\t</>\r\n\t)\r\n}","import React, { useState } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport \"./Login.css\";\r\nimport \"firebase/auth\";\r\nimport firebase from \"firebase/app\";\r\nimport {\r\n  FirebaseAuthConsumer\r\n} from \"@react-firebase/auth\";\r\nimport { FaGoogle, FaFacebook } from 'react-icons/fa';\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./SignUp.css\"\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [show, setShow] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isPasswordSame, setIsPasswordSame] = useState(false);\r\n  const history = useHistory();\r\n\r\n  function validateForm() {\r\n    return email.length > 0 && password.length > 0;\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    setIsSubmitting(true);\r\n\r\n    if (password === confirmPassword){\r\n      setIsPasswordSame(true)\r\n\r\n      firebase.auth().createUserWithEmailAndPassword(email, password)\r\n      .catch((e) => {\r\n          setErrorMessage(e.message)\r\n          setShow(true) \r\n      }).then((userCredential) => {\r\n        history.push(\"/\");\r\n      });\r\n\r\n    } else {\r\n      setIsPasswordSame(false)\r\n    }\r\n\r\n    setIsSubmitting(false);\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"Login\">\r\n      { isSubmitting ? <div className=\"loader-container\">\r\n        <div className=\"loader\">\r\n        </div>\r\n      </div> : null }\r\n      <h1>Sign Up</h1>\r\n      <Form className=\"d-grid gap-2 my-4\">\r\n        <Button block variant=\"danger\" className=\"social-button py-2\" onClick={() => {\r\n              const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n              firebase.auth().signInWithPopup(googleAuthProvider)\r\n              .catch((e) => {\r\n                  setErrorMessage(e.message)\r\n                  setShow(true)\r\n              }).then((userCredential) => {\r\n                history.push(\"/\");\r\n              });\r\n            }}>\r\n          <FaGoogle className=\"social-button-icon\"/>\r\n          Sign Up With Google\r\n        </Button>\r\n        <Button block variant=\"primary\" className=\"social-button py-2\" onClick={() => {\r\n              const facebookAuthProvider = new firebase.auth.FacebookAuthProvider();\r\n              firebase.auth().signInWithPopup(facebookAuthProvider)\r\n              .catch((e) => {\r\n                  setErrorMessage(e.message)\r\n                  setShow(true)\r\n              }).then((userCredential) => {\r\n                history.push(\"/\");\r\n              });\r\n            }}>\r\n          <FaFacebook className=\"social-button-icon\"/>\r\n          Sign Up With Facebook\r\n        </Button>\r\n      </Form>\r\n\r\n      <div class=\"or-separator\">\r\n        <i>or</i>\r\n      </div>\r\n\r\n      <Form className=\"d-grid gap-1\" onSubmit={handleSubmit}>\r\n        <Form.Group size=\"lg\" controlId=\"email\">\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control\r\n            autoFocus\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group size=\"lg\" controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group size=\"lg\" controlId=\"confirm-password\">\r\n          <Form.Label>Confirm Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            value={confirmPassword}\r\n            onChange={(e) => setConfirmPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        { isPasswordSame ? null : <p className=\"password-not-same-error\">Both passwords must be the same!</p>}\r\n        <Button block size=\"lg mt-3\" type=\"submit\" disabled={!validateForm()}>\r\n          Sign Up\r\n        </Button>\r\n      </Form>\r\n\r\n      {show ? \r\n        (\r\n          <Alert className=\"fixed-bottom\" variant=\"danger\" onClose={() => setShow(false)} dismissible>\r\n            <Alert.Heading>Oh snap! You got an error!</Alert.Heading>\r\n            <p>\r\n              {errorMessage}\r\n            </p>\r\n          </Alert>\r\n        ) :\r\n        null\r\n      }\r\n      \r\n\r\n{/*      <FirebaseAuthConsumer>\r\n        {({ isSignedIn, user, providerId }) => {\r\n          return (\r\n            <div>\r\n              <pre style={{ height: 300, overflow: \"auto\" }}>\r\n                {JSON.stringify({ isSignedIn, user, providerId }, null, 2)}\r\n              </pre>\r\n              {isSignedIn ? <Button block size=\"lg\" onClick={() => {\r\n                    firebase.auth().signOut();\r\n                  }}>\r\n                Sign Out\r\n              </Button> : null}\r\n            </div>\r\n          );\r\n        }}\r\n      </FirebaseAuthConsumer>*/}\r\n    </div>\r\n  );\r\n}","import config from \"./config.js\"\r\nimport { FirestoreCollection } from \"@react-firebase/firestore\";\r\nimport { useState } from \"react\";\r\nimport Toast from \"react-bootstrap/Toast\";\r\nimport './RecommendationList.css';\r\nimport { InView } from 'react-intersection-observer';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { FaRegHeart, FaHeart } from 'react-icons/fa';\r\nimport firebase from \"firebase/app\";\r\nimport {\r\n  IfFirebaseAuthed,\r\n  IfFirebaseUnAuthed,\r\n} from \"@react-firebase/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MdLocationOn, MdAdd } from 'react-icons/md'\r\nimport Button from 'react-bootstrap/Button';\r\nimport ShowMoreText from \"react-show-more-text\";\r\nimport { Fab } from '@material-ui/core';\r\nimport './MyLikes.css'\r\n\r\nexport default function MyPosts(){\r\n\tconst [showLocationToast, setShowLocationToast] = useState(false);\r\n\tconst [limit, setLimit] = useState(10);\r\n\tconst [limitReached, setLimitReached] = useState(false);\r\n\tconst [favourites, setFavourites] = useState(null);\r\n\tconst [recommendations, setRecommendations] = useState([]);\r\n\r\n\tfirebase.auth().onAuthStateChanged((user) => {\r\n\t  if (!user){\r\n\t  \thistory.push('/login')\r\n\t  }\r\n\t});\r\n\r\n\tconst history = useHistory();\r\n\r\n\t// let location;\r\n\r\n\t// navigator.permissions\r\n\t// \t.query({ name: \"geolocation\" })\r\n\t// \t.then(function(result){\r\n\t// \t\tif (result.state === \"granted\"){\r\n\t// \t\t\tnavigator.geolocation.getCurrentPosition(function(position){\r\n\t// \t\t\t\t\tlocation = position;\r\n\t// \t\t\t\t}\r\n\t// \t\t\t)\r\n\t// \t\t} else if (result.state === \"denied\"){\r\n\t// \t\t\tsetShowLocationToast(true);\r\n\t// \t\t}\r\n\t// \t});\r\n\r\n\r\n\tvar db = firebase.firestore();\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<IfFirebaseAuthed>\r\n\t\t\t\t{({ isSignedIn, user, providerId }) => {\r\n\t\t\t\t\tif(isSignedIn){\r\n\t\t\t\t\t\tconsole.log(\"signed in\")\r\n\r\n\t\t\t\t\t\tvar email = user.email;\r\n\r\n\r\n\t\t\t\t\t\tif (favourites == null){\r\n\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").where('userEmail', \"==\", email).get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\t\tlet tempFavourites = []\r\n\t\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\t\ttempFavourites.push(doc.data().recommendationId)\r\n\t\t\t\t\t\t\t\t\t})\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\tsetFavourites(tempFavourites)\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tvar recRef = db.collection(\"recommendations\").where('username', \"==\", email).orderBy(\"timestamps\", \"desc\").get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\tconsole.log(querySnapshot)\r\n\t\t\t\t\t\t\t\tsetRecommendations(querySnapshot)\r\n\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(recommendations)\r\n\t\t\t\t\t\t\tif (recommendations.docs){\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-4\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h1>My Posts</h1>\r\n\t\t\t\t\t\t\t\t\t\t{ recommendations.docs.map((snapshot, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet recommendation = snapshot.data()\r\n\t\t\t\t\t\t\t\t\t\t\tlet recommendationId = snapshot.id\r\n\t\t\t\t\t\t\t\t\t\t\tvar favourited = favourites.includes(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/*<Card onClick={()=>{history.push('/recommendation/' + recommendationId)}} className=\"rounded-0\">*/}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card onClick=\"\" className=\"rounded-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.pictures.length > 0 ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Card.Img className=\"rounded-0\" variant=\"top\" src={recommendation.pictures[0]}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t<a href=\"\" onClick={()=>history.push('/recommendation/' + recommendationId)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t  <Card.Title className=\"article-title\">{recommendation.dishes ? recommendation.dishes.join(\", \") : recommendation.dish}</Card.Title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t</a> \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <a href={recommendation.googleLink} target=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <Button type=\"button\" variant=\"danger\" className=\"d-flex align-items-center px-2 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<MdLocationOn size={20}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<span className=\"restaurant\">{recommendation.restaurant}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <Card.Text className=\"description\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  <ShowMoreText className=\"show-more\" lines={3} more=\"Show more\" less=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \t{recommendation.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </ShowMoreText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <hr className=\"mt-2 mb-3\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <Card.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t{recommendation.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t<span className=\"likes d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t{recommendation.favourites}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t\t\t<FaHeart className=\"number-of-likes\" size={14}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    </Card.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  </Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{favourited ? \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={()=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('userEmail', \"==\", email)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.where('recommendationId', \"==\", recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.get().then((querySnapshot) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoc.ref.delete();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = favourites.indexOf(recommendationId);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet favouritesCopy = JSON.parse(JSON.stringify(favourites));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  favouritesCopy.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFavourites(favouritesCopy)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet noOfFavourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: noOfFavourites - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaHeart className=\"like-icon liked\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"liked\">Liked</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar docRef = db.collection(\"favourites\").add({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'recommendationId': recommendationId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'userEmail': email,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'timestamps': firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}).then((docRef) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet favouritesCopy = JSON.parse(JSON.stringify(favourites));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavouritesCopy.push(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    console.log(\"Document written with ID: \", docRef.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    setFavourites(favouritesCopy)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar recommendationRef = db.collection('recommendations').doc(recommendationId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.get()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (doc.exists && doc.data().favourites){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites = doc.data().favourites\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: favourites + 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Document successfully updated')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendationRef.update({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfavourites: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}} className=\"like-button d-flex align-items-center py-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaRegHeart className=\"like-icon\" size={18}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLike\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\t  \r\n\t\t\t\t}}\r\n\r\n\t\t\t</IfFirebaseAuthed>\r\n\t\t</>\r\n\t)\r\n}","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Home from \"./Home.js\";\r\nimport Login from './Login.js'\r\nimport NotFound from \"./NotFound.js\"\r\nimport RecommendationPage from './RecommendationPage.js'\r\nimport PostRecommendation from './PostRecommendation.js'\r\nimport MyLikes from './MyLikes.js'\r\nimport SignUp from './SignUp.js'\r\nimport MyPosts from './MyPosts.js'\r\n\r\nexport default function Routes() {\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/\">\r\n        <Home />\r\n      </Route>\r\n      <Route path=\"/login\">\r\n        <Login/>\r\n      </Route>\r\n      <Route path=\"/my-likes\">\r\n        <MyLikes/>\r\n      </Route>\r\n      <Route path=\"/recommendation/:id\">\r\n        <RecommendationPage/>\r\n      </Route>\r\n      <Route path=\"/add-recommendation\">\r\n        <PostRecommendation/>\r\n      </Route>\r\n      <Route path=\"/signup\">\r\n        <SignUp/>\r\n      </Route>\r\n      <Route path=\"/my-posts\">\r\n        <MyPosts/>\r\n      </Route>\r\n      <Route>\r\n        <NotFound />\r\n      </Route>\r\n    </Switch>\r\n  );\r\n}","import './App.css';\nimport {\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport {\n  FirebaseAuthProvider,\n  FirebaseAuthConsumer,\n} from \"@react-firebase/auth\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Routes from \"./Routes\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport config from \"./config\";\nimport \"firebase/firestore\";\nimport { FirestoreProvider } from \"@react-firebase/firestore\";\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\n\nfunction App() {\n  const history = useHistory();\n\n  return (\n    <FirestoreProvider {...config} firebase={firebase}>\n      <FirebaseAuthProvider firebase={firebase} {...config}>\n        <div className=\"App\">\n\n                <FirebaseAuthConsumer>\n                  {({ isSignedIn, user, providerId }) => {\n\n                  return (\n                    <Navbar fixed =\"top\" collapseOnSelect expand=\"md\" variant=\"dark\" >\n                      <LinkContainer to=\"/\">\n                        <Navbar.Brand className=\"logo ml-2\">\n                          zeek\n                        </Navbar.Brand>\n                      </LinkContainer>\n                      <Navbar.Toggle />\n                      <Navbar.Collapse className=\"justify-content-end\">\n                        <Nav activeKey ={window.location.pathname}>\n                          {isSignedIn ? \n                            <>\n                            <LinkContainer to=\"/my-posts\">\n                              <Nav.Link>My Posts</Nav.Link>\n                            </LinkContainer>\n                            <LinkContainer to=\"/my-likes\">\n                              <Nav.Link>My Likes</Nav.Link>\n                            </LinkContainer>\n                            <LinkContainer to=\"/add-recommendation\">\n                              <Nav.Link>Add A Recommendation</Nav.Link>\n                            </LinkContainer>\n                            <Nav.Link onClick={() => {\n                                  firebase.auth().signOut();\n                                  history.push(\"/login\");\n                                }}>\n                              Sign Out\n                            </Nav.Link>\n                            </>: \n                            <>\n                              <LinkContainer to=\"/signup\">\n                                <Nav.Link>Sign Up</Nav.Link>\n                              </LinkContainer>\n                              <LinkContainer to=\"/login\">\n                                <Nav.Link>Login</Nav.Link>\n                              </LinkContainer>\n                            </>\n                          }                      \n                        </Nav>\n                      </Navbar.Collapse>\n                    </Navbar>\n                  )\n                  }}\n                </FirebaseAuthConsumer>\n                <Routes />\n        </div>\n      </FirebaseAuthProvider>\n    </FirestoreProvider>\n  );\n}\n\n\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}