(this.webpackJsonpzeek=this.webpackJsonpzeek||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},165:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},184:function(e,t,n){},187:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(36),i=n.n(s),o=(n(124),n(4)),r=(n(125),n(15)),l=(n(90),n(29)),d=n(70),j=n(48),u=n(22),h=n(9),b=(n(165),n.p,n(55)),m={apiKey:"AIzaSyBd7UGQwV2Z_VQ_sXhmNitUQfpKWOllMe8",authDomain:"the-weekday-proj-1569491088719.firebaseapp.com",databaseURL:"https://the-weekday-proj-1569491088719.firebaseio.com",projectId:"the-weekday-proj-1569491088719",storageBucket:"the-weekday-proj-1569491088719.appspot.com",messagingSenderId:"889676615489",appId:"1:889676615489:web:24aedd466655ab93e19bc0",measurementId:"G-FMCYLKSPSF"},O=n(51),f=n(31),x=(n(97),n(75)),p=n(17),g=n(21),v=n(39),N=n(20),k=n(56),y=n.n(k),S=n(2);function w(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(10),i=Object(h.a)(s,2),o=i[0],d=i[1],j=Object(a.useState)(!1),m=Object(h.a)(j,2),k=m[0],w=m[1],C=Object(a.useState)(null),I=Object(h.a)(C,2),L=I[0],F=I[1];r.a.auth().onAuthStateChanged((function(e){e||E.push("/login")}));var E=Object(u.k)();navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state?navigator.geolocation.getCurrentPosition((function(e){e})):"denied"===e.state&&c(!0)}));var z=r.a.firestore();return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(l.c,{children:function(e){var t=e.isSignedIn,a=e.user;e.providerId;if(t){console.log("signed in");var s=a.email;if(null!=L)return Object(S.jsx)(O.a,{path:"/recommendations/",limit:1,orderBy:[{field:"timestamps",type:"desc"}],children:function(e){return console.log("loaded"),Object(S.jsxs)("div",{children:[Object(S.jsxs)(f.a,{bg:"warning",show:n,onClose:function(){return c(!1)},children:[Object(S.jsx)(f.a.Header,{children:Object(S.jsx)("strong",{className:"me-auto",children:"No Location Access"})}),Object(S.jsxs)(f.a.Body,{children:["Zeek does not have access to your location right now. We wouldn't want to recommend restaurants you can't reach. Find out how to enable location access for your browser ",Object(S.jsx)("a",{target:"_blank",href:"https://docs.buddypunch.com/en/articles/919258-how-to-enable-location-services-for-chrome-safari-edge-and-android-ios-devices-gps-setting",children:"here"}),"."]})]}),e.isLoading||!e.value?null:e.value.map((function(t,n){var a=e.ids[n],c=L.includes(a);return Object(S.jsxs)("div",{children:[Object(S.jsxs)(p.a,{onClick:"",className:"rounded-0",children:[t.pictures.length>0?Object(S.jsx)(p.a.Img,{className:"rounded-0",variant:"top",src:t.pictures[0]}):null,Object(S.jsxs)(p.a.Body,{children:[Object(S.jsx)("a",{href:"",onClick:function(){return E.push("/recommendation/"+a)},children:Object(S.jsx)(p.a.Title,{className:"article-title",children:t.dishes?t.dishes.join(", "):t.dish})}),Object(S.jsx)("a",{href:t.googleLink,target:"_blank",children:Object(S.jsxs)(N.a,{type:"button",variant:"danger",className:"d-flex align-items-center px-2 mb-2",children:[Object(S.jsx)(v.b,{size:20}),Object(S.jsx)("span",{className:"restaurant",children:t.restaurant})]})}),Object(S.jsx)(p.a.Text,{className:"description",children:Object(S.jsx)(y.a,{className:"show-more",lines:3,more:"Show more",less:"",children:t.description})}),Object(S.jsx)("hr",{className:"mt-2 mb-3"}),Object(S.jsxs)(p.a.Text,{className:"text-muted",children:[t.name,Object(S.jsxs)("span",{className:"likes d-flex align-items-center",children:[t.favourites,Object(S.jsx)(g.c,{className:"number-of-likes",size:14})]})]})]})]}),c?Object(S.jsxs)("div",{onClick:function(){z.collection("favourites").where("userEmail","==",s).where("recommendationId","==",a).get().then((function(e){e.forEach((function(e){e.ref.delete()}));var t=L.indexOf(a),n=JSON.parse(JSON.stringify(L));t>-1&&n.splice(t,1),F(n)}));var e=z.collection("recommendations").doc(a);e.get().then((function(t){if(t.exists){var n=t.data().favourites;e.update({favourites:n-1}).then((function(){console.log("Document successfully updated")}))}}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.c,{className:"like-icon liked",size:18}),Object(S.jsx)("div",{className:"liked",children:"Liked"})]}):Object(S.jsxs)("div",{onClick:function(){z.collection("favourites").add({recommendationId:a,userEmail:s,timestamps:r.a.firestore.FieldValue.serverTimestamp()}).then((function(e){var t=JSON.parse(JSON.stringify(L));t.push(a),console.log("Document written with ID: ",e.id),F(t)}));var e=z.collection("recommendations").doc(a);e.get().then((function(t){t.exists&&t.data().favourites?(t.data().favourites,Object(b.a)("favourites"),e.update({favourites:L+1}).then((function(){console.log("Document successfully updated")}))):e.update({favourites:1})}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.d,{className:"like-icon",size:18}),"Like"]})]},n)})),Object(S.jsx)(x.a,{onChange:function(t,n){!t||e.isLoading||k||d(o+5),!e.isLoading&&e.value.length<o&&w(!0)},children:Object(S.jsx)("div",{className:"end",children:Object(S.jsx)("h3",{children:k?"You've reached the bottom! How about adding your own post?":"Loading more posts..."})})})]})}});z.collection("favourites").where("userEmail","==",s).get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data().recommendationId)})),F(t)}))}}})})}var C=n(32);function I(){var e=Object(u.l)(),t=Object(a.useState)(!1),n=Object(h.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){if(console.log(e),e.state){s(e.state.state.deleted),e.state.state.deleted=!1;var t=Object(C.a)(),n=Object(o.a)({},e.state);delete n.state,t.replace(Object(o.a)(Object(o.a)({},t.location),{},{state:n}))}}),[e]),Object(S.jsxs)("div",{className:"Home",children:[Object(S.jsx)("div",{className:"lander",children:Object(S.jsx)("h1",{children:"Recommendations"})}),Object(S.jsx)(w,{}),c?Object(S.jsxs)(f.a,{bg:"success",show:c,onClose:function(){return s(!1)},children:[Object(S.jsx)(f.a.Header,{children:Object(S.jsx)("strong",{className:"me-auto",children:"Post Deleted"})}),Object(S.jsx)(f.a.Body,{className:"post-deleted",children:"Your post has been deleted!"})]}):null]})}var L=n(16),F=(n(111),n(64));function E(){var e=Object(a.useState)(""),t=Object(h.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),o=i[0],l=i[1],d=Object(a.useState)(!1),j=Object(h.a)(d,2),b=j[0],m=j[1],O=Object(a.useState)(""),f=Object(h.a)(O,2),x=f[0],p=f[1],v=Object(u.k)();return Object(S.jsxs)("div",{className:"Login",children:[Object(S.jsx)("h1",{children:"Sign In"}),Object(S.jsxs)(L.a,{className:"d-grid gap-2 my-4",children:[Object(S.jsxs)(N.a,{block:!0,variant:"danger",className:"social-button py-2",onClick:function(){var e=new r.a.auth.GoogleAuthProvider;r.a.auth().signInWithPopup(e).catch((function(e){p(e.message),m(!0)})).then((function(e){v.push("/")}))},children:[Object(S.jsx)(g.b,{className:"social-button-icon"}),"Sign In With Google"]}),Object(S.jsxs)(N.a,{block:!0,variant:"primary",className:"social-button py-2",onClick:function(){var e=new r.a.auth.FacebookAuthProvider;r.a.auth().signInWithPopup(e).catch((function(e){p(e.message),m(!0)})).then((function(e){v.push("/")}))},children:[Object(S.jsx)(g.a,{className:"social-button-icon"}),"Sign In With Facebook"]})]}),Object(S.jsx)("div",{className:"or-separator",children:Object(S.jsx)("i",{children:"or"})}),Object(S.jsxs)(L.a,{className:"d-grid gap-1",onSubmit:function(e){e.preventDefault(),r.a.auth().signInWithEmailAndPassword(n,o).then((function(e){console.log("watrafak"),v.push("/")})).catch((function(e){p(e.message),m(!0)}))},children:[Object(S.jsxs)(L.a.Group,{size:"lg",controlId:"email",children:[Object(S.jsx)(L.a.Label,{children:"Email"}),Object(S.jsx)(L.a.Control,{autoFocus:!0,type:"email",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(S.jsxs)(L.a.Group,{size:"lg",controlId:"password",children:[Object(S.jsx)(L.a.Label,{children:"Password"}),Object(S.jsx)(L.a.Control,{type:"password",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(S.jsx)(N.a,{block:!0,size:"lg mt-3",type:"submit",disabled:!(n.length>0&&o.length>0),children:"Sign In"})]}),b?Object(S.jsxs)(F.a,{className:"fixed-bottom",variant:"danger",onClose:function(){return m(!1)},dismissible:!0,children:[Object(S.jsx)(F.a.Heading,{children:"Oh snap! You got an error!"}),Object(S.jsx)("p",{children:x})]}):null]})}n(181);function z(){return Object(S.jsx)("div",{className:"NotFound text-center",children:Object(S.jsx)("h3",{children:"Sorry, page not found!"})})}n(182);var P=n(101),T=n(82),D=n.n(T),B=(n(183),n(37));function A(){var e=Object(u.m)().id,t=Object(a.useState)(null),n=Object(h.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),o=Object(h.a)(i,2),d=o[0],j=o[1],b=Object(a.useState)({}),m=Object(h.a)(b,2),O=m[0],f=m[1],x=Object(a.useState)([]),k=Object(h.a)(x,2),y=k[0],w=k[1],C=Object(a.useState)(0),I=Object(h.a)(C,2),L=I[0],F=I[1],E=Object(a.useState)(!1),z=Object(h.a)(E,2),T=z[0],A=z[1],J=Object(a.useState)(!1),U=Object(h.a)(J,2),G=U[0],R=U[1],_=Object(a.useState)(!1),W=Object(h.a)(_,2),H=W[0],V=W[1],M=Object(u.k)(),K=r.a.firestore();return Object(S.jsx)(l.a,{children:function(t){var n=t.isSignedIn,a=t.user;t.providerId;if(n){var i=a.email;if(null==c){console.log("set favourite");K.collection("favourites").where("userEmail","==",i).get().then((function(t){var n=[];t.forEach((function(e){n.push(e.data().recommendationId)})),n.includes(e)&&s(!0)}))}if(!d){K.collection("recommendations").doc(e).get().then((function(e){e.exists&&(e.data().username===i&&A(!0),f(e.data()),j(!0),e.data().favourites&&F(e.data().favourites),e.data().pictures&&w(e.data().pictures.map((function(e){return{original:e}}))))}))}return d?Object(S.jsxs)(P.a,{className:"recommendation my-auto",children:[Object(S.jsxs)(p.a,{className:"rounded-0 details",children:[y.length>0?Object(S.jsx)(D.a,{showBullets:!0,showPlayButton:!1,items:y,showThumbnails:!1}):null,Object(S.jsxs)(p.a.Body,{children:[Object(S.jsxs)(p.a.Title,{children:[O.dishes?O.dishes.join(", "):O.dish,T?Object(S.jsxs)("span",{className:"delete d-flex align-items-center",children:[Object(S.jsx)(v.a,{onClick:function(){R(!0)},className:"delete-icon",size:25}),G?Object(S.jsxs)(B.a,{onHide:function(){return R(!1)},show:G,centered:!0,children:[Object(S.jsx)(B.a.Header,{children:Object(S.jsx)(B.a.Title,{children:"Are you sure?"})}),Object(S.jsx)(B.a.Body,{children:Object(S.jsx)("p",{children:"Do you really want to delete this post? This process cannot be undone."})}),Object(S.jsxs)(B.a.Footer,{children:[Object(S.jsx)(N.a,{variant:"secondary",onClick:function(){R(!1)},children:"Cancel"}),Object(S.jsx)(N.a,{variant:"danger",onClick:function(){console.log("asd"),V(!0),O&&O.username===i&&K.collection("recommendations").doc(e).delete().then((function(){M.push("/",{state:{deleted:!0}})}))},children:"Delete"})]})]}):null]}):null,H?Object(S.jsx)("div",{className:"loader-container",children:Object(S.jsx)("div",{className:"loader"})}):null]}),Object(S.jsx)("a",{href:O.googleLink,target:"_blank",children:Object(S.jsxs)(N.a,{type:"button",variant:"danger",className:"px-2 mb-2 align-items-center",children:[Object(S.jsx)(v.b,{size:20}),O.restaurant]})}),Object(S.jsx)(p.a.Text,{children:O.description}),Object(S.jsx)("hr",{className:"mt-2 mb-3"}),Object(S.jsxs)(p.a.Text,{className:"text-muted",children:[O.name,Object(S.jsxs)("span",{className:"likes d-flex align-items-center",children:[L,Object(S.jsx)(g.c,{className:"number-of-likes",size:14})]})]})]})]}),c?Object(S.jsxs)("div",{onClick:function(){K.collection("favourites").where("userEmail","==",i).where("recommendationId","==",e).get().then((function(e){e.forEach((function(e){e.ref.delete()}))}));var t=K.collection("recommendations").doc(e);t.get().then((function(e){if(e.exists){var n=e.data().favourites;t.update({favourites:n-1}).then((function(){console.log("Document successfully updated"),F(n-1),s(!1)}))}}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.c,{className:"like-icon liked",size:18}),Object(S.jsx)("div",{className:"liked",children:"Liked"})]}):Object(S.jsxs)("div",{onClick:function(){K.collection("favourites").add({recommendationId:e,userEmail:i,timestamps:r.a.firestore.FieldValue.serverTimestamp()}).then((function(e){console.log("Document written with ID: ",e.id)}));var t=K.collection("recommendations").doc(e);t.get().then((function(e){if(e.exists&&e.data().favourites){var n=e.data().favourites;t.update({favourites:n+1}).then((function(){console.log("Document successfully updated")}))}else t.update({favourites:1});s(!0),F(L+1)}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.d,{className:"like-icon",size:18}),"Like"]})]}):null}M.push("/login")}})}n(184);var J=n(207),U=n(116),G=n(117),R=n.n(G);n(194);function _(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),o=i[0],d=i[1],j=Object(a.useState)([]),b=Object(h.a)(j,2),O=b[0],x=b[1],g=Object(a.useState)(!1),k=Object(h.a)(g,2),y=k[0],w=k[1],C=Object(a.useState)(null),I=Object(h.a)(C,2),F=I[0],E=I[1],z=Object(a.useState)(null),P=Object(h.a)(z,2),T=P[0],A=P[1],G=Object(a.useState)(""),_=Object(h.a)(G,2),W=_[0],H=_[1],V=Object(a.useState)(!1),M=Object(h.a)(V,2),K=M[0],Y=M[1],q=Object(u.k)(),Q=Object(a.useState)([]),Z=Object(h.a)(Q,2),X=Z[0],$=Z[1];function ee(e){var t=JSON.parse(JSON.stringify(n)).concat(o.replace(/\w\S*/g,(function(e){return e.replace(/^\w/,(function(e){return e.toUpperCase()}))})));c(t)}function te(e){d(e.target.value)}function ne(e){x(Array.from(e.target.files).map((function(e){return{original:URL.createObjectURL(e)}}))),console.log(e.target.files),$(Array.from(e.target.files))}function ae(e){H(e.target.value)}function ce(e){if(Y(!0),!F)return A("One restaurant must be chosen for your recommendation."),void Y(!1);if(n.length<1)return A("At least one dish must be added to the recommendation"),void Y(!1);if(W.length<1)return A("Review section cannot be empty"),void Y(!1);A(null);var t=F.value.place_id;fetch("https://secret-ocean-49799.herokuapp.com/"+("https://maps.googleapis.com/maps/api/place/details/json?place_id="+t+"&key="+m.apiKey),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t={description:W,dishes:n,restaurant:F.value.structured_formatting.main_text,location:new r.a.firestore.GeoPoint(e.result.geometry.location.lat,e.result.geometry.location.lng),googleLink:e.result.url,timestamps:r.a.firestore.FieldValue.serverTimestamp(),name:r.a.auth().currentUser.displayName,username:r.a.auth().currentUser.email,favourites:0,active:!0},a=r.a.firestore();a.collection("recommendations").add(t).then((function(e){X.forEach((function(t,n){new R.a(t,{quality:.8,success:function(t){r.a.storage().ref().child("recommendations/"+e.id+"/picture"+n).put(t).then((function(t){console.log("Uploaded a file"),t.ref.getDownloadURL().then((function(t){console.log(t),a.collection("recommendations").doc(e.id).update({pictures:r.a.firestore.FieldValue.arrayUnion(t)}).then((function(){n===X.length-1&&(Y(!1),q.push("/recommendation/"+e.id))}))}))}))}})})),0===X.length&&(Y(!1),q.push("/recommendation/"+e.id))}))})).catch((function(e){return console.log(e)}))}return r.a.auth().onAuthStateChanged((function(e){e||q.push("/login")})),Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(l.c,{children:function(e){var t=e.isSignedIn;e.user,e.providerId;if(t)return Object(S.jsxs)(p.a,{children:[K?Object(S.jsx)("div",{className:"loader-container",children:Object(S.jsx)("div",{className:"loader"})}):null,Object(S.jsxs)(f.a,{bg:"danger",show:T,onClose:function(){return A(null)},children:[Object(S.jsx)(f.a.Header,{children:Object(S.jsx)("strong",{className:"me-auto",children:"Error When Submitting"})}),Object(S.jsx)(f.a.Body,{className:"form-error",children:T})]}),Object(S.jsxs)(B.a,{show:y,onHide:function(){return w(!1)},centered:!0,children:[Object(S.jsx)(B.a.Header,{closeButton:!0,children:Object(S.jsx)(B.a.Title,{children:"Location Search"})}),Object(S.jsx)(B.a.Body,{children:Object(S.jsx)(U.a,{autocompletionRequest:{componentRestrictions:{country:"my"},types:["establishment"]},selectProps:{location:F,onChange:E},apiKey:m.apiKey})}),Object(S.jsx)(B.a.Footer,{children:Object(S.jsx)(N.a,{variant:"primary",onClick:function(){return w(!1)},children:"Save Changes"})})]}),Object(S.jsxs)(L.a,{noValidate:!0,className:"post-recommendation-form",children:[Object(S.jsx)("h2",{className:"post-your-recommendation mb-4",children:"Post Your Recommendation"}),Object(S.jsx)(L.a.Label,{className:"restaurant",children:"Restaurant : "}),F?Object(S.jsx)("a",{href:"",target:"_blank",children:Object(S.jsxs)(N.a,{type:"button",variant:"danger",className:"px-2 mb-2 align-items-center",children:[Object(S.jsx)(v.b,{size:20}),F.value.structured_formatting.main_text]})}):null,Object(S.jsx)("div",{}),Object(S.jsx)(N.a,{className:"mb-4",variant:"primary",onClick:function(){return w(!0)},children:"Pick A Restaurant"}),Object(S.jsxs)(L.a.Group,{className:"mb-3",children:[Object(S.jsx)(L.a.Label,{children:"Dish Name"}),Object(S.jsx)(L.a.Control,{onChange:te,placeholder:"Enter dish name here"}),Object(S.jsx)(L.a.Text,{muted:!0,children:'Enter one dish at a time and press the "Add Dish" button. Repeat the process to add multiple dishes.'})]}),n.map((function(e,t){return Object(S.jsx)(J.a,{label:e,onDelete:function(e){var a=JSON.parse(JSON.stringify(n));a.splice(t,1),c(a)}})})),Object(S.jsx)("p",{}),Object(S.jsx)(N.a,{variant:"primary",onClick:ee,children:"Add Dish"}),Object(S.jsxs)(L.a.Group,{className:"mt-4 mb-3",children:[Object(S.jsx)(L.a.Label,{children:"Review"}),Object(S.jsx)(L.a.Control,{as:"textarea",rows:3,placeholder:"Tell us what you liked about the place!",onChange:ae})]}),Object(S.jsxs)(L.a.Group,{controlId:"formFileMultiple",className:"mb-3",children:[Object(S.jsx)(L.a.Label,{children:"Photos"}),Object(S.jsx)(L.a.Control,{accept:"image/*",type:"file",multiple:!0,onChange:ne})]}),O.length>0?Object(S.jsx)(D.a,{showBullets:!0,showPlayButton:!1,items:O,showThumbnails:!1}):null,Object(S.jsx)(N.a,{className:"mt-2",variant:"primary",onClick:ce,children:"Submit"})]})]})}})})}n(112);function W(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=(t[0],t[1],Object(a.useState)(10)),c=Object(h.a)(n,2),s=(c[0],c[1],Object(a.useState)(!1)),i=Object(h.a)(s,2),o=(i[0],i[1],Object(a.useState)(null)),d=Object(h.a)(o,2),j=d[0],m=d[1],O=Object(a.useState)([]),f=Object(h.a)(O,2),x=f[0],k=f[1];r.a.auth().onAuthStateChanged((function(e){e||w.push("/login")}));var w=Object(u.k)(),C=r.a.firestore();return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(l.c,{children:function(e){var t=e.isSignedIn,n=e.user;e.providerId;if(t){console.log("signed in");var a=n.email;if(null==j)C.collection("favourites").where("userEmail","==",a).get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data().recommendationId)})),C.collection("recommendations").where(r.a.firestore.FieldPath.documentId(),"in",t).get().then((function(e){k(e)})),m(t)}));else if(x.docs)return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"mt-4"}),Object(S.jsx)("h1",{children:"My Likes"}),x.docs.map((function(e,t){var n=e.data(),c=e.id,s=j.includes(c);return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{children:[Object(S.jsxs)(p.a,{onClick:"",className:"rounded-0",children:[n.pictures.length>0?Object(S.jsx)(p.a.Img,{className:"rounded-0",variant:"top",src:n.pictures[0]}):null,Object(S.jsxs)(p.a.Body,{children:[Object(S.jsx)("a",{href:"",onClick:function(){return w.push("/recommendation/"+c)},children:Object(S.jsx)(p.a.Title,{className:"article-title",children:n.dishes?n.dishes.join(", "):n.dish})}),Object(S.jsx)("a",{href:n.googleLink,target:"_blank",children:Object(S.jsxs)(N.a,{type:"button",variant:"danger",className:"d-flex align-items-center px-2 mb-2",children:[Object(S.jsx)(v.b,{size:20}),Object(S.jsx)("span",{className:"restaurant",children:n.restaurant})]})}),Object(S.jsx)(p.a.Text,{className:"description",children:Object(S.jsx)(y.a,{className:"show-more",lines:3,more:"Show more",less:"",children:n.description})}),Object(S.jsx)("hr",{className:"mt-2 mb-3"}),Object(S.jsxs)(p.a.Text,{className:"text-muted",children:[n.name,Object(S.jsxs)("span",{className:"likes d-flex align-items-center",children:[n.favourites,Object(S.jsx)(g.c,{className:"number-of-likes",size:14})]})]})]})]}),s?Object(S.jsxs)("div",{onClick:function(){C.collection("favourites").where("userEmail","==",a).where("recommendationId","==",c).get().then((function(e){e.forEach((function(e){e.ref.delete()}));var t=j.indexOf(c),n=JSON.parse(JSON.stringify(j));t>-1&&n.splice(t,1),m(n)}));var e=C.collection("recommendations").doc(c);e.get().then((function(t){if(t.exists){var n=t.data().favourites;e.update({favourites:n-1}).then((function(){console.log("Document successfully updated")}))}}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.c,{className:"like-icon liked",size:18}),Object(S.jsx)("div",{className:"liked",children:"Liked"})]}):Object(S.jsxs)("div",{onClick:function(){C.collection("favourites").add({recommendationId:c,userEmail:a,timestamps:r.a.firestore.FieldValue.serverTimestamp()}).then((function(e){var t=JSON.parse(JSON.stringify(j));t.push(c),console.log("Document written with ID: ",e.id),m(t)}));var e=C.collection("recommendations").doc(c);e.get().then((function(t){t.exists&&t.data().favourites?(t.data().favourites,Object(b.a)("favourites"),e.update({favourites:j+1}).then((function(){console.log("Document successfully updated")}))):e.update({favourites:1})}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.d,{className:"like-icon",size:18}),"Like"]})]},t)})}))]})}}})})}n(187);function H(){var e=Object(a.useState)(""),t=Object(h.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),o=i[0],l=i[1],d=Object(a.useState)(""),j=Object(h.a)(d,2),b=j[0],m=j[1],O=Object(a.useState)(!1),f=Object(h.a)(O,2),x=f[0],p=f[1],v=Object(a.useState)(""),k=Object(h.a)(v,2),y=k[0],w=k[1],C=Object(a.useState)(!1),I=Object(h.a)(C,2),E=I[0],z=I[1],P=Object(a.useState)(!1),T=Object(h.a)(P,2),D=T[0],B=T[1],A=Object(u.k)();return Object(S.jsxs)("div",{className:"Login",children:[E?Object(S.jsx)("div",{className:"loader-container",children:Object(S.jsx)("div",{className:"loader"})}):null,Object(S.jsx)("h1",{children:"Sign Up"}),Object(S.jsxs)(L.a,{className:"d-grid gap-2 my-4",children:[Object(S.jsxs)(N.a,{block:!0,variant:"danger",className:"social-button py-2",onClick:function(){var e=new r.a.auth.GoogleAuthProvider;r.a.auth().signInWithPopup(e).catch((function(e){w(e.message),p(!0)})).then((function(e){A.push("/")}))},children:[Object(S.jsx)(g.b,{className:"social-button-icon"}),"Sign Up With Google"]}),Object(S.jsxs)(N.a,{block:!0,variant:"primary",className:"social-button py-2",onClick:function(){var e=new r.a.auth.FacebookAuthProvider;r.a.auth().signInWithPopup(e).catch((function(e){w(e.message),p(!0)})).then((function(e){A.push("/")}))},children:[Object(S.jsx)(g.a,{className:"social-button-icon"}),"Sign Up With Facebook"]})]}),Object(S.jsx)("div",{class:"or-separator",children:Object(S.jsx)("i",{children:"or"})}),Object(S.jsxs)(L.a,{className:"d-grid gap-1",onSubmit:function(e){e.preventDefault(),z(!0),o===b?(B(!0),r.a.auth().createUserWithEmailAndPassword(n,o).catch((function(e){w(e.message),p(!0)})).then((function(e){A.push("/")}))):B(!1),z(!1)},children:[Object(S.jsxs)(L.a.Group,{size:"lg",controlId:"email",children:[Object(S.jsx)(L.a.Label,{children:"Email"}),Object(S.jsx)(L.a.Control,{autoFocus:!0,type:"email",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(S.jsxs)(L.a.Group,{size:"lg",controlId:"password",children:[Object(S.jsx)(L.a.Label,{children:"Password"}),Object(S.jsx)(L.a.Control,{type:"password",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(S.jsxs)(L.a.Group,{size:"lg",controlId:"confirm-password",children:[Object(S.jsx)(L.a.Label,{children:"Confirm Password"}),Object(S.jsx)(L.a.Control,{type:"password",value:b,onChange:function(e){return m(e.target.value)}})]}),D?null:Object(S.jsx)("p",{className:"password-not-same-error",children:"Both passwords must be the same!"}),Object(S.jsx)(N.a,{block:!0,size:"lg mt-3",type:"submit",disabled:!(n.length>0&&o.length>0),children:"Sign Up"})]}),x?Object(S.jsxs)(F.a,{className:"fixed-bottom",variant:"danger",onClose:function(){return p(!1)},dismissible:!0,children:[Object(S.jsx)(F.a.Heading,{children:"Oh snap! You got an error!"}),Object(S.jsx)("p",{children:y})]}):null]})}function V(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=(t[0],t[1],Object(a.useState)(10)),c=Object(h.a)(n,2),s=(c[0],c[1],Object(a.useState)(!1)),i=Object(h.a)(s,2),o=(i[0],i[1],Object(a.useState)(null)),d=Object(h.a)(o,2),j=d[0],m=d[1],O=Object(a.useState)([]),f=Object(h.a)(O,2),x=f[0],k=f[1];r.a.auth().onAuthStateChanged((function(e){e||w.push("/login")}));var w=Object(u.k)(),C=r.a.firestore();return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(l.c,{children:function(e){var t=e.isSignedIn,n=e.user;e.providerId;if(t){console.log("signed in");var a=n.email;if(null==j)C.collection("favourites").where("userEmail","==",a).get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data().recommendationId)})),m(t)})),C.collection("recommendations").where("username","==",a).orderBy("timestamps","desc").get().then((function(e){console.log(e),k(e)}));else if(console.log(x),x.docs)return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"mt-4"}),Object(S.jsx)("h1",{children:"My Posts"}),x.docs.map((function(e,t){var n=e.data(),c=e.id,s=j.includes(c);return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{children:[Object(S.jsxs)(p.a,{onClick:"",className:"rounded-0",children:[n.pictures.length>0?Object(S.jsx)(p.a.Img,{className:"rounded-0",variant:"top",src:n.pictures[0]}):null,Object(S.jsxs)(p.a.Body,{children:[Object(S.jsx)("a",{href:"",onClick:function(){return w.push("/recommendation/"+c)},children:Object(S.jsx)(p.a.Title,{className:"article-title",children:n.dishes?n.dishes.join(", "):n.dish})}),Object(S.jsx)("a",{href:n.googleLink,target:"_blank",children:Object(S.jsxs)(N.a,{type:"button",variant:"danger",className:"d-flex align-items-center px-2 mb-2",children:[Object(S.jsx)(v.b,{size:20}),Object(S.jsx)("span",{className:"restaurant",children:n.restaurant})]})}),Object(S.jsx)(p.a.Text,{className:"description",children:Object(S.jsx)(y.a,{className:"show-more",lines:3,more:"Show more",less:"",children:n.description})}),Object(S.jsx)("hr",{className:"mt-2 mb-3"}),Object(S.jsxs)(p.a.Text,{className:"text-muted",children:[n.name,Object(S.jsxs)("span",{className:"likes d-flex align-items-center",children:[n.favourites,Object(S.jsx)(g.c,{className:"number-of-likes",size:14})]})]})]})]}),s?Object(S.jsxs)("div",{onClick:function(){C.collection("favourites").where("userEmail","==",a).where("recommendationId","==",c).get().then((function(e){e.forEach((function(e){e.ref.delete()}));var t=j.indexOf(c),n=JSON.parse(JSON.stringify(j));t>-1&&n.splice(t,1),m(n)}));var e=C.collection("recommendations").doc(c);e.get().then((function(t){if(t.exists){var n=t.data().favourites;e.update({favourites:n-1}).then((function(){console.log("Document successfully updated")}))}}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.c,{className:"like-icon liked",size:18}),Object(S.jsx)("div",{className:"liked",children:"Liked"})]}):Object(S.jsxs)("div",{onClick:function(){C.collection("favourites").add({recommendationId:c,userEmail:a,timestamps:r.a.firestore.FieldValue.serverTimestamp()}).then((function(e){var t=JSON.parse(JSON.stringify(j));t.push(c),console.log("Document written with ID: ",e.id),m(t)}));var e=C.collection("recommendations").doc(c);e.get().then((function(t){t.exists&&t.data().favourites?(t.data().favourites,Object(b.a)("favourites"),e.update({favourites:j+1}).then((function(){console.log("Document successfully updated")}))):e.update({favourites:1})}))},className:"like-button d-flex align-items-center py-2",children:[Object(S.jsx)(g.d,{className:"like-icon",size:18}),"Like"]})]},t)})}))]})}}})})}function M(){return Object(S.jsxs)(u.g,{children:[Object(S.jsx)(u.d,{exact:!0,path:"/",children:Object(S.jsx)(I,{})}),Object(S.jsx)(u.d,{path:"/login",children:Object(S.jsx)(E,{})}),Object(S.jsx)(u.d,{path:"/my-likes",children:Object(S.jsx)(W,{})}),Object(S.jsx)(u.d,{path:"/recommendation/:id",children:Object(S.jsx)(A,{})}),Object(S.jsx)(u.d,{path:"/add-recommendation",children:Object(S.jsx)(_,{})}),Object(S.jsx)(u.d,{path:"/signup",children:Object(S.jsx)(H,{})}),Object(S.jsx)(u.d,{path:"/my-posts",children:Object(S.jsx)(V,{})}),Object(S.jsx)(u.d,{children:Object(S.jsx)(z,{})})]})}var K=n(54);n(193);var Y=function(){var e=Object(u.k)();return Object(S.jsx)(O.b,Object(o.a)(Object(o.a)({},m),{},{firebase:r.a,children:Object(S.jsx)(l.b,Object(o.a)(Object(o.a)({firebase:r.a},m),{},{children:Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(l.a,{children:function(t){var n=t.isSignedIn;t.user,t.providerId;return Object(S.jsxs)(d.a,{fixed:"top",collapseOnSelect:!0,expand:"md",variant:"dark",children:[Object(S.jsx)(K.LinkContainer,{to:"/",children:Object(S.jsx)(d.a.Brand,{className:"logo ml-2",children:"zeek"})}),Object(S.jsx)(d.a.Toggle,{}),Object(S.jsx)(d.a.Collapse,{className:"justify-content-end",children:Object(S.jsx)(j.a,{activeKey:window.location.pathname,children:n?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(K.LinkContainer,{to:"/my-posts",children:Object(S.jsx)(j.a.Link,{children:"My Posts"})}),Object(S.jsx)(K.LinkContainer,{to:"/my-likes",children:Object(S.jsx)(j.a.Link,{children:"My Likes"})}),Object(S.jsx)(K.LinkContainer,{to:"/add-recommendation",children:Object(S.jsx)(j.a.Link,{children:"Add A Recommendation"})}),Object(S.jsx)(j.a.Link,{onClick:function(){r.a.auth().signOut(),e.push("/login")},children:"Sign Out"})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(K.LinkContainer,{to:"/signup",children:Object(S.jsx)(j.a.Link,{children:"Sign Up"})}),Object(S.jsx)(K.LinkContainer,{to:"/login",children:Object(S.jsx)(j.a.Link,{children:"Login"})})]})})})]})}}),Object(S.jsx)(M,{})]})}))}))},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,208)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))},Q=n(27);n(191);i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(Q.BrowserRouter,{children:Object(S.jsx)(Y,{})})}),document.getElementById("root")),q()},97:function(e,t,n){}},[[192,1,2]]]);
//# sourceMappingURL=main.52fdfd9c.chunk.js.map